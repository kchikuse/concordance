{fetch file="style.css" assign="css"}
{fetch file="app.js" assign="js"}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="K Chikuse">
  <meta name="description" content="Concordance">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Concordance</title>
  <meta name="theme-color" content="#418980">
  <link href="favicon.ico" rel="icon">
  <style>{$css|strip}</style>
</head>
<body>
  {strip}
  <container>
    <navigation>
      <div class="search">
        <label>
          <input id="search" type="search" placeholder="Search..." autocomplete="off">
        </label>
      </div>

      <details class="books">
        <summary>BOOKS</summary>
        <ul>
        {foreach $books as $b}
          <li>
            <a href="?book={$b.id}&chapter=1" {if $b.id eq $book} class="active" {/if}>{$b.id|book_name}</a>
          </li>
        {/foreach}
        </ul>
      </details>

      <details class="chapters">
        <summary>CHAPTERS</summary>
        <ul>
        {foreach $chapters as $c}
          <li>
            <a {if $c eq $chapter} class="active" {else} href="?book={$book}&chapter={$c}" {/if}>{$c}</a>
          </li>
        {/foreach}
        </ul>
      </details>

      <div class="analysis">
        {if $sn}
        {fetch file="`$smarty.const.APP_URL`sn/`$sn|urlencode`"}
        {/if}
      </div>
      
      <div class="verse-nav">
        <a {if $prev.book} href="?book={$prev.book}&chapter={$prev.chapter}" {/if}>
        <arrow left></arrow></a>
        <a {if $next.book} href="?book={$next.book}&chapter={$next.chapter}" {/if}>
        <arrow right></arrow></a>
      </div>
    </navigation>

    <div class="verses">
      <h1>{$book|book_name} {$chapter}</h1>

      {foreach $verses as $v}
        <p><sup>{$v.verse}</sup> {$v.text|remove_prefix}</p>
      {/foreach}
    </div>

  </container>
  <style>
    w[lemma="{$sn}"],
    w[lemma="strong:{$sn}"] {
      border-bottom: solid 2px var(--orange);
    }
    </style>
  {/strip}
</body>
<script>{$js|strip}</script>
</html>